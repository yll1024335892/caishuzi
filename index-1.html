<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pk10</title>
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
</head>
<body>
<button id="hand-refresh">手动再次刷新</button><button id="jiexi">解析</button><button id="sf">二组分析反卜法</button>
<button id="st">二组分析卜法</button><button id="sff">三组分析反卜法</button><button id="stt">三组分析卜法</button>
<button id="ren">人字法</button>
<button id="get-data">数据获取</button>
<div id="res">
    <table class="lot-table" style="width: 515px;">
        <tr>
            <td width="160px">类型</td>
            <td width="350px" class="nums-index">
                <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span>
            </td>
        </tr>
    <tr class="res-first">
        <td width="160px">二组分析反卜法</td>
        <td width="350px" class="nums">
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
        </td>
    </tr>
    <tr class="res-two">
        <td width="160px">二组分析卜法</td>
        <td width="350px" class="nums">
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
        </td>
    </tr>
        <tr class="res-ren">
            <td width="160px">二组人字法</td>
            <td width="350px" class="nums">
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
                <span class="pk-noo" data-no="*">*</span>
            </td>
        </tr>
    <tr class="res-three">
        <td width="160px">三组分析反卜法</td>
        <td width="350px" class="nums">
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
        </td>
    </tr>
    <tr class="res-four">
        <td width="160px">三组分析卜法</td>
        <td width="350px" class="nums">
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
            <span class="pk-noo" data-no="*">*</span>
        </td>
    </tr>
    </table>
</div>
<div id="contain"></div>

<audio id="bgMusic" src="./img/music.wav"  autoplay="autoplay"></audio>
<script type="text/javascript">
    $(function () {
        $arr1=new Array();
        $arr2=new Array();
        $arr3=new Array();
        $tempArr=new Array();
        var music = document.getElementById("bgMusic");

        function playMusic(){
            if(music.paused){
                music.play();
            }else {
                music.play();
            }
        }

       $("#hand-refresh").click(function () {
           parseData();
       });

        setInterval(function () {
            parseData();
        },10000);

        $("#get-data").click(function(){
            analysis();
        });
        function parseData() {
            $("#contain").load("https://csj.1396j.com/pk10/kaijiang .lot-table",function () {
                analysis();
            });
        }
        parseData();
        function analysis() {
            $arr1=[];
            $arr2=[];
            $arr3=[];
            for($i=1;$i<4;$i++){
                $tdVal=$("#contain tr").eq($i).find('.nums');
                for ($j=0;$j<10;$j++){
                    $realV= $tdVal.find("i").eq($j).attr("data-no");
                    if($i===1){
                        $arr1[$j]=$realV;
                    }else if($i===2){
                        $arr2[$j]=$realV;
                    }else if($i===3){
                        $arr3[$j]=$realV;
                    }
                }
            }
            reTwoBu($arr1,$arr2);
            twoBu($arr1,$arr2);
            towRen($arr1,$arr2);
            reThreeBu($arr1,$arr2,$arr3);
            threeBu($arr1,$arr2,$arr3);
            if($arr1.sort().toString()!=$tempArr.sort().toString()){
                playMusic();
                console.log("警报出来");
            }
            $tempArr=$arr1;
        }

        $("#jiexi").click(function () {
            $arr1=[];
            $arr2=[];
            $arr3=[];
            for($i=1;$i<4;$i++){
                $tdVal=$("#contain tr").eq($i).find('td');
                for ($j=2;$j<12;$j++){
                    $realV= $tdVal.eq($j).html();
                    if($i===1){
                        $arr1[$j-2]=$realV;
                    }else if($i===2){
                        $arr2[$j-2]=$realV;
                    }else if($i===3){
                        $arr3[$j-2]=$realV;
                    }
                }
            }
            reTwoBu($arr1,$arr2);
            twoBu($arr1,$arr2);
            reThreeBu($arr1,$arr2,$arr3);
            threeBu($arr1,$arr2,$arr3);
        });
        


        function reTwoBu($ar1,$ar2) {//二组分析反卜法
            $(".res-first td.nums span").attr("data-no","*").removeClass().addClass("pk-noo");
            for ($i=0;$i<10;$i++){
                if($i+2<10){
                    $h1= parseInt($ar2[$i])+parseInt($ar1[$i+1]);
                    $h1v=10-$h1%10;
                    $h2= parseInt($ar2[$i+2])+parseInt($ar1[$i+2]);
                    $h2v=10-$h2%10;
                    if($h1v===$h2v && ($h1+$h1v)%10===0){
                        $(".res-first td.nums span").eq($i+2).removeClass().addClass("pk-no"+$h1v).attr("data-no",$h1v).empty();
                    }
                }
            }
        }

        function twoBu($ar1,$ar2) {//二组分析卜法
            $(".res-two td.nums span").attr("data-no","*").removeClass().addClass("pk-noo");
            for($i=0;$i<10;$i++){
                if($i+2<10){
                    $hh1= parseInt($ar2[$i])+parseInt($ar1[$i]);
                    $hh1v=10-$hh1%10;
                    $hh2= parseInt($ar2[$i+2])+parseInt($ar1[$i+1]);
                    $hh2v=10-$hh2%10;
                    if($hh1v===$hh2v && ($hh1+$hh1v)%10===0){
                        $(".res-two td.nums span").eq($i).removeClass().addClass("pk-no"+$hh1v).attr("data-no",$hh1v).empty();
                    }
                }
            }
        }
        
        function towRen($ar1,$ar2) {//二组人字法
            $(".res-ren td.nums span").attr("data-no","*").removeClass().addClass("pk-noo");
            for($i=0;$i<10;$i++){
                if($i+4<10){
                    $hh1= parseInt($ar2[$i])+parseInt($ar1[$i+1]);
                    $hh1v=10-$hh1%10;
                    $hh2= parseInt($ar2[$i+4])+parseInt($ar1[$i+3]);
                    $hh2v=10-$hh2%10;
                    if($hh1v===$hh2v && ($hh1+$hh1v)%10===0){
                        $(".res-ren td.nums span").eq($i+2).removeClass().addClass("pk-no"+$hh1v).attr("data-no",$hh1v).empty();
                    }
                }
            }
        }

        //        三组分析反卜法
        function reThreeBu($ar1,$ar2,$ar3) {
            $(".res-three td.nums span").attr("data-no","*").removeClass().addClass("pk-noo");
            for ($i=0;$i<10;$i++){
                if($i+2<10){
                    $h1= parseInt($ar2[$i])+parseInt($ar1[$i+1]);
                    $h1v=10-$h1%10;
                    $h2= parseInt($ar2[$i+2])+parseInt($ar1[$i+2]);
                    $h2v=10-$h2%10;
                    if($h1v===$h2v && ($h1+$h1v)%10===0){
                        if($i==1){
                            if(parseInt($ar3[$i-1])===$h1v){
                                $(".res-three td.nums span").eq($i+2).removeClass().addClass("pk-no"+$h1v).attr("data-no",$h1v).empty();
                            }
                        }else if($i==0){
                            if(parseInt($ar3[$i+2])===$h1v){
                                $(".res-three td.nums span").eq($i+2).removeClass().addClass("pk-no"+$h1v).attr("data-no",$h1v).empty();
                            }
                        }else {
                            if(parseInt($ar3[$i+2])===$h1v || parseInt($ar3[$i-1])===$h1v){
                                $(".res-three td.nums span").eq($i+2).removeClass().addClass("pk-no"+$h1v).attr("data-no",$h1v).empty();
                            }
                        }
                    }
                }
            }
            //res-three
        }

        //      三组分析卜法
        function threeBu($ar1,$ar2,$ar3) {
            $(".res-four td.nums span").attr("data-no","*").removeClass().addClass("pk-noo");
            for($i=0;$i<10;$i++){
                if($i+2<10){
                    $hh1= parseInt($ar2[$i])+parseInt($ar1[$i]);
                    $hh1v=10-$hh1%10;
                    $hh2= parseInt($ar2[$i+2])+parseInt($ar1[$i+1]);
                    $hh2v=10-$hh2%10;
                    if($hh1v===$hh2v && ($hh1+$hh1v)%10===0){
                        if($i!=7){
                            if($hh1v===parseInt($ar3[$i]) || $hh1v===parseInt($ar3[$i+3])){
                                $(".res-four td.nums span").eq($i).removeClass().addClass("pk-no"+$hh1v).attr("data-no",$hh1v).empty();
                            }
                        }else {
                            if($hh1v===parseInt($ar3[$i])){
                                $(".res-four td.nums span").eq($i).removeClass().addClass("pk-no"+$hh1v).attr("data-no",$hh1v).empty();
                            }
                        }
                    }
                }
            }
            //
        }


        $("#sf").click(function () {//二组反卜
            $a1=['5','7','8','9','1','6','2','3','4','10'];
            $a2=['6','10','8','9','1','3','5','2','7','4'];
            for ($i=0;$i<10;$i++){
                if($i+2<10){
                    $h1= parseInt($a2[$i])+parseInt($a1[$i+1]);
                    $h1v=10-$h1%10;
                    $h2= parseInt($a2[$i+2])+parseInt($a1[$i+2]);
                    $h2v=10-$h2%10;
                    if($h1v===$h2v && ($h1+$h1v)%10===0){
                        console.log("成功",$i,"值",$h1v);
                    }else {
                        console.log("失败",$i);
                    }
                }
            }
        });

        $("#st").click(function () {
            $a11=['7','8','9','4','2','5','6','10','3','1'];
            $a22=['1','9','7','10','2','5','8','6','4','3'];
            for($i=0;$i<10;$i++){
                if($i+2<10){
                    $hh1= parseInt($a22[$i])+parseInt($a11[$i]);
                    $hh1v=10-$hh1%10;
                    $hh2= parseInt($a22[$i+2])+parseInt($a11[$i+1]);
                    $hh2v=10-$hh2%10;
                    if($hh1v===$hh2v && ($hh1+$hh1v)%10===0){
                        console.log("成功",$i,"值",$hh1v);
                    }else {
                        console.log("失败",$i);
                    }
                }
            }
        });

        $("#ren").click(function () {
            $a11=['2','4','3','7','6','8','10','9','5','1'];
            $a22=['3','4','7','8','10','6','1','9','5','2'];
            for($i=0;$i<10;$i++){
                if($i+4<10){
                    $hh1= parseInt($a22[$i])+parseInt($a11[$i+1]);
                    $hh1v=10-$hh1%10;
                    $hh2= parseInt($a22[$i+4])+parseInt($a11[$i+3]);
                    $hh2v=10-$hh2%10;
                    if($hh1v===$hh2v && ($hh1+$hh1v)%10===0){
                        console.log("成功",$i,"值",$hh1v);
                    }else {
                        console.log("失败",$i);
                    }
                }
            }
        });

        
        $("#sff").click(function () {
            $a1=['8','4','5','7','1','6','3','2','10','9'];
            $a2=['10','7','3','5','8','4','6','2','1','9'];
            $a3=['8','6','3','1','9','4','7','10','2','5'];
            for ($i=0;$i<10;$i++){
                if($i+2<10){
                    $h1= parseInt($a2[$i])+parseInt($a1[$i+1]);
                    $h1v=10-$h1%10;
                    $h2= parseInt($a2[$i+2])+parseInt($a1[$i+2]);
                    $h2v=10-$h2%10;
                    if($h1v===$h2v && ($h1+$h1v)%10===0){
                        if($i==1){
                            if(parseInt($a3[$i-1])===$h1v){
                                console.log("成功",$i,"第",$i+3,"值",$h1v);
                            }
                        }else if($i==0){
                            if(parseInt($a3[$i+2])===$h1v){
                                console.log("成功",$i);
                            }
                        }else {
                            if(parseInt($a3[$i+2])===$h1v || parseInt($a3[$i-1])===$h1v){
                                console.log("成功",$i,"值",$h1v);
                            }
                        }
                    }
                }
            }

        });



        
        $("#stt").click(function () {
            $a11=['7','8','9','4','2','5','6','10','3','1'];
            $a22=['1','9','7','10','2','5','8','6','4','3'];
            $a33=['7','3','10','1','6','8','9','4','5','2'];
            for($i=0;$i<10;$i++){
                if($i+2<10){
                    $hh1= parseInt($a22[$i])+parseInt($a11[$i]);
                    $hh1v=10-$hh1%10;
                    $hh2= parseInt($a22[$i+2])+parseInt($a11[$i+1]);
                    $hh2v=10-$hh2%10;
                    if($hh1v===$hh2v && ($hh1+$hh1v)%10===0){
                        if($i!=7){
                            if($hh1v===parseInt($a33[$i]) || $hh1v===parseInt($a33[$i+3])){
                                console.log("第"+$i+"行",$a33[$i]);
                            }
                        }else {
                            if($hh1v===parseInt($a33[$i])){
                                console.log("第"+$i+"行",$a33[$i]);
                            }
                        }
                    }
                }
            }
        });



    });
</script>
</body>
</html>